(this["webpackJsonpemc-students"]=this["webpackJsonpemc-students"]||[]).push([[0],{46:function(e,t,a){e.exports=a(82)},51:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(41),l=a.n(r),i=(a(51),a(13)),c=a.n(i),o=a(30),u=a(18),d=a(5),m=a(6),h=a(8),v=a(7),p=a(9),f=a(27),g=a.n(f);a(53),a(55);g.a.initializeApp({apiKey:"AIzaSyB4viqxXXUz96JPMSKv7by8o5hea1ltpVc",authDomain:"tech-teacher-db.firebaseapp.com",databaseURL:"https://tech-teacher-db.firebaseio.com",projectId:"tech-teacher-db",storageBucket:"tech-teacher-db.appspot.com",messagingSenderId:"521395870719",appId:"1:521395870719:web:e282a78b20ffb28f2a25ca"});var E=function(){var e=Object(u.a)(c.a.mark((function e(t,a){var n,s,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.doc("users/".concat(t.uid)),e.next=3,n.get();case 3:if(e.sent.exists){e.next=16;break}return s=t.displayName,r=t.email,l=new Date,"",e.prev=8,e.next=11,n.set(Object(o.a)({displayName:s,email:r,createdAt:l,userRole:""},a));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.log("Problem sending User to DB",e.t0.message);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,a){return e.apply(this,arguments)}}(),b=g.a.auth(),k=g.a.firestore(),N=new g.a.auth.GoogleAuthProvider;N.setCustomParameters({prompt:"select_account"});var y=function(){return b.signInWithPopup(N)},C=(a(56),a(24)),w=(a(57),a(58),a(3)),S=function(){var e=Object(p.g)();return s.a.createElement("div",{className:"games-box"},s.a.createElement("div",{className:"game-info-box",onClick:function(){return e.push("/game-videorank")}},s.a.createElement("div",{className:"dash-icon"},s.a.createElement(w.o,null)),s.a.createElement("div",{className:"game-title"},"Video Ranks"),s.a.createElement("div",{className:"game-description"},s.a.createElement("p",null,"Choose a topic, post a video, vote on videos. Who gets more votes?"))),s.a.createElement("div",{className:"game-info-box"},s.a.createElement("div",{className:"dash-icon"},s.a.createElement(w.e,null)),s.a.createElement("div",{className:"game-title"},"Survey"),s.a.createElement("div",{className:"game-description"},"Classes")),s.a.createElement("div",{className:"game-info-box"},s.a.createElement("div",{className:"dash-icon"},s.a.createElement(w.i,null)),s.a.createElement("div",{className:"game-title"},"Guess"),s.a.createElement("div",{className:"game-description"},"Pending Tasks")))},j=a(43),O=function(e){var t=Object(n.useState)([]),a=Object(C.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)(!1),c=Object(C.a)(i,2),o=c[0],u=c[1],d=Object(n.useState)(!0),m=Object(C.a)(d,2),h=m[0],v=m[1];Object(n.useEffect)((function(){e.currentUser&&l(e.currentUser.teachesClasses)}),[e.currentUser]);var f=Object(p.g)();return s.a.createElement("div",{className:"dashboard-box"},s.a.createElement("div",{className:"btn-group"},s.a.createElement("div",{className:"dash-btn-box"},s.a.createElement("div",{className:"dash-icon"},s.a.createElement(j.a,null)),s.a.createElement("div",{className:"dash-btn-label"},"Live")),s.a.createElement("div",{className:o?"dash-btn-box toggle-clicked":"dash-btn-box",onClick:function(){u(!o),v(!h)}},s.a.createElement("div",{className:"dash-icon"},s.a.createElement(w.d,null)),s.a.createElement("div",{className:"dash-btn-label"},"Games")),s.a.createElement("div",{className:"dash-btn-box"},s.a.createElement("div",{className:"dash-icon"},s.a.createElement(w.b,null)),s.a.createElement("div",{className:"dash-btn-label"},"Projects"))),o?s.a.createElement(S,null):null,h?s.a.createElement("div",{className:"info-boxes-container"},s.a.createElement("div",{className:"dash-info-box",onClick:function(){return f.push("/students")}},s.a.createElement("div",{className:"dash-icon"},s.a.createElement(w.n,null)),s.a.createElement("div",{className:"dash-big-number"},e.students.length),s.a.createElement("div",{className:"dash-info-label"},"Students")),s.a.createElement("div",{className:"dash-info-box"},s.a.createElement("div",{className:"dash-icon"},s.a.createElement(w.e,null)),s.a.createElement("div",{className:"dash-big-number"},r.length),s.a.createElement("div",{className:"dash-info-label"},"Classes")),s.a.createElement("div",{className:"dash-info-box"},s.a.createElement("div",{className:"dash-icon"},s.a.createElement(w.i,null)),s.a.createElement("div",{className:"dash-big-number pending"},"8"),s.a.createElement("div",{className:"dash-info-label"},"Pending Tasks"))):null)},x=(a(63),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"page-container"},s.a.createElement(O,{currentUser:this.props.currentUser,students:this.props.students}))}}]),a}(s.a.Component)),U=a(35),L=a(44),D=(a(64),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){n.setState({tagsInputValue:e.currentTarget.value})},n.pushTagToDB=function(e){var t=n.state,a=t.studentId,s=t.tagsInputValue,r=t.tagsArray;k.doc("students/".concat(a)).update({Labels:[].concat(Object(U.a)(r),[s])}).then().catch((function(e){return console.error(e)}))},n.handleKeyPress=function(e){"Enter"===e.key&&""!==e.target.value&&(n.pushTagToDB(),n.tagsInput.value=null)},n.removeTag=function(e){var t=n.state.studentId,a=Object(U.a)(n.state.tagsArray);a.splice(e,1),k.doc("students/".concat(t)).update({Labels:a})},n.state={tagsInputValue:"test results",tagsArray:n.props.currentStudent.Labels,students:n.props.students,studentId:n.props.currentStudent.id},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state.studentId;k.doc("students/".concat(t)).onSnapshot((function(t){var a=t.data();e.setState({tagsArray:a.Labels})}))}},{key:"render",value:function(){var e=this,t=this.state.tagsArray;return s.a.createElement("div",{className:"tags-input-box"},s.a.createElement("input",{type:"search",className:"tags-input",placeholder:"Press 'Enter' to add tags",ref:function(t){e.tagsInput=t},onChange:this.handleInputChange,onKeyDown:this.handleKeyPress}),s.a.createElement("div",{className:"tags-box"},t.map((function(t,a){return s.a.createElement("div",{className:"tag",key:a},t,s.a.createElement("span",{className:"tag-delete",onClick:function(){return e.removeTag(a)}},s.a.createElement(L.a,{className:"tag-delete-icon"})))}))))}}]),a}(n.Component)),I=(a(65),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getUpdatedStudents=function(e){n.setState({students:e})},n.state={students:n.props.students,showSearchField:n.props.showSearchField,searchField:"",chosenClass:n.props.chosenClass},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.students;t.sort((function(e,t){return e.id-t.id})),console.log(t);return""!==this.props.chosenClass?t.filter((function(t){return t.Class.includes(e.props.chosenClass)})):t.filter((function(t){return t.Class.includes(e.state.searchField)})),s.a.createElement("div",{className:"students-list"},s.a.createElement("div",{className:"class-filter-box"},s.a.createElement("label",{htmlFor:"class-filter",className:"basic-label"},"Filtre os alunos pelo n\xfamero da turma:")," ",s.a.createElement("br",null),s.a.createElement("input",{type:"search",id:"class-filter",placeholder:"Digite o n\xfamero da turma",onChange:function(t){e.setState({searchField:t.currentTarget.value})}})),s.a.createElement("div",{className:"cards-list"},t.map((function(t){return s.a.createElement("div",{key:t.id,className:"card-box"},s.a.createElement("div",{className:"card-row-main"},s.a.createElement("div",{className:"card-numbers"},s.a.createElement("p",{className:"card-class"},t.Class),s.a.createElement("p",{className:"card-student-number"},"#",t.Number)),s.a.createElement("div",null,s.a.createElement("img",{className:"card-images",src:"/techy-class"+"/images/".concat(t.Class,"-").concat(t.Number,".jpg"),alt:""})),s.a.createElement("div",{className:"card-names"},s.a.createElement("h3",null,t.FirstName),s.a.createElement("p",{className:"card-last-name"},t.LastName))),s.a.createElement("div",{className:"card-row-tags"},s.a.createElement(D,{currentStudent:t,students:e.state.students,updateStudents:e.getUpdatedStudents})))}))))}}]),a}(n.Component)),V=(a(66),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleClassClick=function(e){n.setState({chosenClass:e.currentTarget.firstChild.innerHTML},(function(){var e=n.state.students.filter((function(t){return t.Class===n.state.chosenClass?t:e}));console.log(e[0].Class),n.setState({filteredStudents:e},(function(){return console.log("settei filteredStudents")})),n.forceUpdate()}))},n.state={classes:n.props.classes,students:n.props.students,filteredStudents:[],chosenClass:"",showStudents:!1,showClassFilter:!1},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state.classes,a=this.state.students;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"class-list"},t.map((function(t,n){var r=t,l=0;return s.a.createElement("div",{className:"class-card",key:n,onClick:e.handleClassClick},s.a.createElement("div",{className:"class-number"},r),s.a.createElement("hr",null),s.a.createElement("div",{className:"total-students"},a.forEach((function(e){e.Class===r&&l++})),s.a.createElement(w.m,{size:12})," ",l))}))),s.a.createElement("div",{className:"child-components-box"},console.log("Post-click state.filteredStudents: "+this.state.filteredStudents),""!==this.state.chosenClass?s.a.createElement(I,{students:this.state.students,showClassFilter:this.state.showClassFilter,chosenClass:this.state.chosenClass}):null))}}]),a}(n.Component)),R=function(e){return s.a.createElement(I,{students:e.students})},T=a(21),F=(a(67),function(e){var t,a=Object(n.useState)(e.currentUser),r=Object(C.a)(a,1)[0],l=Object(p.g)();return null!==r&&(t=r.displayName,l.push("/home")),s.a.createElement("div",{className:"header-box"},null===r?s.a.createElement(p.a,{to:"/login"}):null,s.a.createElement("div",{className:"header-logo"},"Techy Class"),s.a.createElement("div",{className:"burger-menu"},s.a.createElement("div",{className:"one"}),s.a.createElement("div",{className:"two"}),s.a.createElement("div",{className:"three"})),s.a.createElement("div",{className:"nav-user-box"},s.a.createElement("nav",{className:"nav-box"},s.a.createElement(T.b,{className:"menu-box",to:"/home"},s.a.createElement("div",{className:"icon-box"},s.a.createElement(w.f,null)),s.a.createElement("span",{className:"menu-item"},"Home"))),s.a.createElement("div",{className:"sign-in-menu"},r?s.a.createElement("div",{className:"user-menu-box"},s.a.createElement("span",null,t,"student"===r.userRole?s.a.createElement("span",{className:"credits"},s.a.createElement(w.c,null),s.a.createElement("span",null,r.credits)):null),s.a.createElement("div",{className:"sign-out-box",onClick:function(){b.signOut(),l.push("/login")}},s.a.createElement("span",{id:"sign-out-text"},"Sign Out"),s.a.createElement(w.h,null))):null)))}),P=(a(68),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"card-list"},s.a.createElement("div",{className:"card"},s.a.createElement("span",{className:"icon"},s.a.createElement(w.g,null)),s.a.createElement("p",{className:"card-title"},"Add Project"))))}}]),a}(s.a.Component)),B=(a(69),a(23)),A=(a(70),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(B.a)({},n,s))},e.handleSubmit=function(){var t=Object(u.a)(c.a.mark((function t(a){var n,s,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,s=n.email,r=n.password,t.next=4,b.signInWithEmailAndPassword(s,r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={email:"",password:""},e}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"sign-in-container"},s.a.createElement("div",{className:"sign-form-box"},s.a.createElement("h2",{className:"sign-subtitle"},"Sign In"),s.a.createElement("form",{className:"sign-in-form",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"input-container"},s.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange,className:"sign-in-input",placeholder:"bla"}),s.a.createElement("label",{className:"input-label",htmlFor:"email"},"your email")),s.a.createElement("div",{className:"input-container"},s.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,className:"sign-in-input",placeholder:"bla"}),s.a.createElement("label",{className:"input-label",htmlFor:"password"},"your password")),s.a.createElement("button",{className:"sign-in-btn"},"Sign In"),s.a.createElement("img",{alt:"Sign In Wigh Google",src:"/techy-class/images/google-sign-in/btn_google_signin_dark_normal_web2x.png",id:"google-sign-in-btn",onClick:y}))))}}]),a}(s.a.Component)),M=(a(71),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(B.a)({},n,s))},e.handleSubmit=function(){var t=Object(u.a)(c.a.mark((function t(a){var n,s,r,l,i,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state,s=n.displayName,r=n.email,l=n.password,i=n.confirmPassword,l===i){t.next=5;break}return alert("Passwords do not match. Try again!"),t.abrupt("return");case 5:if(!(e.state.password.length<6)){t.next=8;break}return alert("Password should have at least 6 characters"),t.abrupt("return");case 8:return t.prev=8,t.next=11,b.createUserWithEmailAndPassword(r,l);case 11:return o=t.sent,u=o.user,t.next=15,E(u,{displayName:s});case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(8),console.error(t.t0),"auth/email-already-in-use"===t.t0.code&&e.setState({showError:!0,errorMessage:"Email already used. Try to sign in."});case 21:case"end":return t.stop()}}),t,null,[[8,17]])})));return function(e){return t.apply(this,arguments)}}(),e.state={displayName:"",email:"",password:"",confirmPassword:"",showError:!1,errorMessage:""},e}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"sign-up-container"},s.a.createElement("div",{className:"sign-form-box"},s.a.createElement("h2",{className:"sign-subtitle"},"Create a new account"),this.state.showError?s.a.createElement("p",{className:"error-message"},this.state.errorMessage):null,s.a.createElement("form",{className:"sign-up-form",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"input-container"},s.a.createElement("input",{type:"text",name:"displayName",value:this.state.displayName,onChange:this.handleChange,className:"sign-in-input",placeholder:"bla"}),s.a.createElement("label",{className:"input-label",htmlFor:"displayName"},"your user name")),s.a.createElement("div",{className:"input-container"},s.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange,className:"sign-in-input",placeholder:"bla"}),s.a.createElement("label",{className:"input-label",htmlFor:"email"},"your email")),s.a.createElement("div",{className:"input-container"},s.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,className:"sign-in-input",placeholder:"bla"}),s.a.createElement("label",{className:"input-label",htmlFor:"password"},"create a password")),s.a.createElement("div",{className:"input-container"},s.a.createElement("input",{type:"password",name:"confirmPassword",value:this.state.confirmPassword,onChange:this.handleChange,className:"sign-in-input",placeholder:"bla"}),s.a.createElement("label",{className:"input-label",htmlFor:"confirm-password"},"confirm password")),s.a.createElement("button",{className:"sign-in-btn"},"Create Account"))))}}]),a}(s.a.Component)),W=function(){return s.a.createElement("div",{className:"login-container"},s.a.createElement("div",{className:"logo"},"Techy Class"),s.a.createElement("div",{className:"sign-in-up-container"},s.a.createElement(A,null),s.a.createElement("hr",{className:"form-divider"}),s.a.createElement(M,null)))},K=(a(72),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({enrollmentCode:e.target.value},(function(){return console.log(n.state.enrollmentCode)}))},n.handleSubmit=function(){var e=n.state,t=e.enrollmentCode,a=e.currentUser,s=k.doc("users/".concat(a.id));switch(t){case"emc2020901":s.update({userRole:"student",credits:10,school:"EMC",class:{year:"2020",classCode:"901"}}).then((function(){return console.log("User Successfully Enrolled!")})).catch((function(e){return console.error(e)}));break;case"emc2020902":s.update({userRole:"student",credits:10,school:"EMC",class:{year:"2020",classCode:"902"}}).then((function(){return console.log("User Successfully Enrolled!")})).catch((function(e){return console.error(e)}));break;default:alert("Code is invalid!")}},n.state={enrollmentCode:"",currentUser:n.props.currentUser},n}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"enrollment-box"},s.a.createElement("h2",{className:"subtitle"},"Type your Enrollment Code:"),s.a.createElement("div",{className:"input-container"},s.a.createElement("input",{type:"text",name:"enrollmentCode",value:this.state.enrollmentCode,onChange:this.handleChange,className:"enrollment-input",placeholder:"bla"}),s.a.createElement("label",{className:"enrollment-label",htmlFor:"email"},"your code")),s.a.createElement("button",{type:"button",className:"submit-btn",onClick:this.handleSubmit}," Submit Code"))}}]),a}(s.a.Component)),_=(a(73),a(74),a(16)),z=function(e,t,a,n){var s=k.collection("videos").doc(e);"like"===a&&!1===n?s.update({likes:_.firestore.FieldValue.arrayRemove({likedBy:t,opinion:"dislike"})}).then((function(){s.update({likes:_.firestore.FieldValue.arrayRemove({likedBy:t,opinion:""})})})).then((function(){s.update({likes:_.firestore.FieldValue.arrayUnion({likedBy:t,opinion:"like"})})})).catch((function(e){return console.error("error liking video: ",e)})):"like"===a&&!0===n?s.update({likes:_.firestore.FieldValue.arrayRemove({likedBy:t,opinion:"dislike"})}).then((function(){s.update({likes:_.firestore.FieldValue.arrayRemove({likedBy:t,opinion:"like"})})})).then((function(){s.update({likes:_.firestore.FieldValue.arrayUnion({likedBy:t,opinion:""})})})).catch((function(e){return console.error("error unliking video: ",e)})):"dislike"===a&&!1===n?s.update({likes:_.firestore.FieldValue.arrayRemove({likedBy:t,opinion:"like"})}).then((function(){s.update({likes:_.firestore.FieldValue.arrayRemove({likedBy:t,opinion:""})})})).then((function(){s.update({likes:_.firestore.FieldValue.arrayUnion({likedBy:t,opinion:"dislike"})})})).catch((function(e){return console.error("error disliking video: ",e)})):"dislike"===a&&!0===n&&s.update({likes:_.firestore.FieldValue.arrayRemove({likedBy:t,opinion:"like"})}).then((function(){s.update({likes:_.firestore.FieldValue.arrayRemove({likedBy:t,opinion:"dislike"})})})).then((function(){s.update({likes:_.firestore.FieldValue.arrayUnion({likedBy:t,opinion:""})})})).catch((function(e){return console.error("error undisliking video: ",e)}))},G=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).toggleVideoLikesListener=null,n.getVideoLikes=function(){k.collection("videos").doc(n.props.video.videoID).get().then((function(e){e.exists&&n.setState({videoLikes:e.data().likes},(function(){n.getLikeStats()}))}))},n.getLikeStats=function(){var e=n.state.videoLikes,t=n.props.currentUser;if(void 0!==e){var a=e.filter((function(e){return"like"===e.opinion})).length,s=e.filter((function(e){return"dislike"===e.opinion})).length,r=e.filter((function(e){return e.likedBy===t.id}));n.setState({totalLikes:a,totalDislikes:s,currentUserLike:r[0]},(function(){n.paintLikeButtons(),console.log("State after getVideoLikes: ",n.state)}))}},n.paintLikeButtons=function(){var e=n.state.currentUserLike;void 0!==e&&"like"===e.opinion?n.setState({likeToggle:!0,dislikeToggle:!1}):void 0!==e&&"dislike"===e.opinion&&n.setState({likeToggle:!1,dislikeToggle:!0})},n.handleClickDelete=function(e){k.collection("videos").doc(e).delete().catch((function(e){return console.error(e)}))},n.handleClickLike=function(e,t){var a=n.state.likeToggle;n.setState({likeToggle:!a,dislikeToggle:!1},(function(){z(e,t,"like",a)}))},n.handleClickDislike=function(e,t){var a=n.state.dislikeToggle;n.setState({dislikeToggle:!a,likeToggle:!1},(function(){z(e,t,"dislike",a)}))},n.state={likeToggle:!1,dislikeToggle:!1,videoLikes:[],totalLikes:0,totalDislikes:0,currentUserLike:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getVideoLikes(),this.toggleVideoLikesListener=k.collection("videos").doc(this.props.video.videoID).onSnapshot((function(){e.getVideoLikes()}))}},{key:"componentWillUnmount",value:function(){this.toggleVideoLikesListener()}},{key:"render",value:function(){var e=this,t=this.props.video,a=t.videoID,n=this.props.currentUser,r=this.state,l=r.likeToggle,i=r.dislikeToggle,c=r.totalLikes,o=r.totalDislikes;return s.a.createElement("div",{className:"video-card",key:a},s.a.createElement("a",{href:t.videoURL,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:t.videoData.snippet.thumbnails.medium.url,alt:"",className:"video-thumb"})),s.a.createElement("div",{className:"video-text"},s.a.createElement("span",{className:"video-title"},t.videoData.snippet.title),s.a.createElement("div",{className:"video-buttons"},s.a.createElement("span",{className:l?"video-icon like-icon toggled":"video-icon like-icon",onClick:function(){return e.handleClickLike(a,n.id)}},s.a.createElement(w.k,null)),s.a.createElement("span",{className:"video-stats"},c||0),s.a.createElement("span",{className:i?"video-icon like-icon toggled":"video-icon like-icon",onClick:function(){return e.handleClickDislike(a,n.id)}},s.a.createElement(w.j,null)),s.a.createElement("span",{className:"video-stats"},o||0),s.a.createElement("span",{className:"video-label"},t.postedBy),s.a.createElement("span",{className:"video-icon"},null!==n&&t.userID===n.id?s.a.createElement(w.l,{onClick:function(){return e.handleClickDelete(a)}}):null))))}}]),a}(s.a.Component),J=a(45),H=a.n(J),X=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).toggleVideoListener=null,n.getVideosFromDB=function(){var e=[];k.collection("videos").get().then((function(t){t.forEach((function(t){e.push(t.data())}))})).then((function(){n.setState({videoList:e},(function(){return n.addUserNameToVideos()}))})).catch((function(e){return console.error(e)}))},n.addUserNameToVideos=function(){var e=n.state.videoList;e.forEach((function(t){k.collection("users").doc(t.userID).get().then((function(e){t.postedBy=e.data().displayName})).then((function(){n.setState({videoList:e})}))}))},n.getVideo=function(e){!1===n.state.videoURLInvalid&&fetch("https://www.googleapis.com/youtube/v3/videos?part=snippet&id=".concat(e,"&key=").concat("AIzaSyCKKT39Cj300mdznNcTRtDnNwPW3fimUR8")).then((function(e){return e.json()})).then((function(e){n.setState({video:e.items[0],showPreview:!0})})).catch((function(e){return console.error(e)}))},n.handleChange=function(e){n.setState({videoURL:e.target.value,videoIsDuplicate:!1},(function(){var e=H()(n.state.videoURL);console.log("videoID after input change: ",e),null!==e?n.setState({videoURLInvalid:!1,videoID:e},Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("videoID in state after validation: ",n.state.videoID),t.next=3,k.collection("videos").where("videoID","==",n.state.videoID).get().then((function(e){e.forEach((function(e){e.data().videoID===n.state.videoID&&n.setState({videoIsDuplicate:!0})}))}));case 3:n.state.videoIsDuplicate||n.getVideo(e);case 4:case"end":return t.stop()}}),t)})))):n.setState({videoURLInvalid:!0,showPreview:!1})}))},n.handleSaveVideo=function(){var e=new Date;k.collection("videos").doc(n.state.videoID).set({userID:n.props.currentUser.id,videoURL:n.state.videoURL,videoID:n.state.videoID,postedAt:e,videoData:n.state.video}).then((function(){!function(e,t,a){var n,s,r=k.collection("users").doc(e);r.get().then((function(e){e.exists&&(n=e.data().credits,console.log("currentCredits = ",n))})).then((function(){switch(t){case"add":s=n+a,r.update({credits:s});break;case"remove":s=n-a,console.log("calc after remove operation = ",s),r.update({credits:s});break;default:s=0}}))}(n.props.currentUser.id,"remove",1),n.setState({videoSaved:!0}),setTimeout((function(){return n.setState({videoSaved:!1,showPreview:!1,videoURL:"",video:null})}),5e3)})).catch((function(e){console.error("Error adding video: ",e)}))},n.getUserByID=function(e){var t;console.log("getUserByID activated"),k.collection("users").doc(e).get().then((function(e){e.exists&&(t=e.data())})).then((function(){n.setState({videoPosters:[{userID:e,userName:t.displayName}]},(function(){return console.log(n.state.videoPosters)}))}))},n.state={videoURL:"",videoID:"",videoURLInvalid:!1,videoIsDuplicate:!1,video:null,videoSaved:!1,showPreview:!1,videoList:null,videoPosters:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getVideosFromDB(),this.toggleVideoListener=k.collection("videos").onSnapshot((function(){return e.getVideosFromDB()}))}},{key:"componentWillUnmount",value:function(){this.toggleVideoListener()}},{key:"render",value:function(){var e=this.state.videoList,t=this.props.currentUser;return s.a.createElement("div",{className:"video-box"},s.a.createElement("h1",null,"Video Ranks"),s.a.createElement("div",{className:"input-box"},s.a.createElement("input",{type:"search",name:"videoURL",value:this.state.videoURL,onChange:this.handleChange,onKeyDown:this.handlePressEnter,className:"animated-input",placeholder:"bla"}),s.a.createElement("label",{className:"animated-label",htmlFor:"videoURL"},"Enter Youtube URL")),this.state.videoURL&&this.state.showPreview?s.a.createElement("div",{className:"video-preview"},s.a.createElement("img",{src:this.state.video.snippet.thumbnails.medium.url,alt:"",className:"video-thumb"}),s.a.createElement("span",{className:"preview-title"},"Post this video?"),s.a.createElement("h4",{className:"video-title"},this.state.video.snippet.title),s.a.createElement("span",{onClick:this.handleSaveVideo,className:"save-icon"},this.state.videoSaved?null:s.a.createElement(w.a,null)),s.a.createElement("span",{className:"credits"},s.a.createElement(w.c,null),s.a.createElement("span",null,"-1"))):null,this.state.videoURLInvalid?s.a.createElement("div",{className:"error-message"},"Please paste a valid Youtube Link"):null,this.state.videoIsDuplicate?s.a.createElement("div",{className:"error-message"},"Video already posted. Choose another one."):null,this.state.videoSaved?s.a.createElement("div",{className:"success-message"},"Video Posted"):null,null!==this.state.videoList?s.a.createElement("div",{className:"video-card-box"},e.map((function(e){return s.a.createElement(G,{video:e,currentUser:t,key:e.videoID})}))):null)}}]),a}(s.a.Component),Y=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).toggleAuthMonitor=null,e.state={students:[],classes:[],currentUser:null,userRole:null,showEnrollment:!1},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;k.collection("students").get().then((function(t){var a=[];t.forEach((function(e){a.push(e.data())})),e.setState({students:a})})),this.toggleAuthMonitor=b.onAuthStateChanged(function(){var t=Object(u.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,E(a);case 3:t.sent.onSnapshot((function(t){e.setState({currentUser:Object(o.a)({id:t.id},t.data())},(function(){e.setState({userRole:e.state.currentUser.userRole})}))})),t.next=8;break;case 7:e.setState({currentUser:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.toggleAuthMonitor()}},{key:"render",value:function(){var e=this.state,t=e.currentUser,a=e.userRole,n=this.state;return s.a.createElement("div",{className:"App"},null!==t?s.a.createElement(F,{currentUser:t}):null,s.a.createElement("div",{className:"main-container"},""===a&&null!==a?s.a.createElement(K,{currentUser:t}):null,s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/login",component:W,render:function(e){return t?s.a.createElement(p.a,{to:"/home"}):null}}),s.a.createElement(p.b,{exact:!0,path:"/techy-class",render:function(e){return t?s.a.createElement(x,n):s.a.createElement(p.a,{to:"/login"})}}),s.a.createElement(p.b,{exact:!0,path:"/home",render:function(e){return t?s.a.createElement(x,n):s.a.createElement(p.a,{to:"/login"})}}),s.a.createElement(p.b,{exact:!0,path:"/classes",render:function(e){return s.a.createElement(V,n)}}),s.a.createElement(p.b,{exact:!0,path:"/students",render:function(e){return s.a.createElement(R,Object.assign({},n,{chosenClass:""}))}}),s.a.createElement(p.b,{path:"/projects",render:function(e){return s.a.createElement(P,n)}}),s.a.createElement(p.b,{path:"/game-videorank",render:function(e){return s.a.createElement(X,n)}}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(T.a,null,s.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.61dc5ae8.chunk.js.map